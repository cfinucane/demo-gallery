<!doctype html>
<html class="no-js" lang="">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<title></title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<style>
      html {
        line-height: 1.15;
        -ms-text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%;
      }

      body {
        margin: 0;
        -webkit-transform-origin: 0% 0%;
        -moz-transform-origin: 0% 0%;
        -o-transform-origin: 0% 0%;
        transform-origin: 0% 0%;
        -moz-transform:     translate(1080px, 0) rotate(90deg);
        -o-transform:       translate(1080px, 0) rotate(90deg);
        -webkit-transform:  translate(1080px, 0) rotate(90deg);
        -ms-transform:      translate(1080px, 0) rotate(90deg);
        transform:          translate(1080px, 0) rotate(90deg);
      }

      h1 {
        color: red;
        position: absolute;
        top: 0; left: 0;
        font-size: 72pt;
        z-index: 100;
      }
		</style>

    <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
	</head>

	<body>
		<h1 id="caption">Loading...</h1>
		<iframe id="portal" width="1920" height="1080" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

		<script>
      var CYCLE_INTERVAL = 60000; // ms

      var cur = 0;
      var data = [];
      var update = function() {
        cur++;
        if (cur >= data.length) {
          cur = 0;
        }
        portal.src = data[cur]["URL"];
        caption.innerText = data[cur]["Caption"] + " (by " + data[cur]["Name"] + ")";
      };

      d3.csv(CSV_URL).then(function(d) {
        data = d;  
        update();
        window.setInterval(update, CYCLE_INTERVAL);
        // TODO: Watch CSV for changes
      });
		</script>
	</body>
</html>

